{
  "version": "v2.6",
  "_comment_2025_11_12": "reason: добавлены человеко-понятные тексты для успешных проверок (user.ok и success_text) по образцу v2.5; уточнены формулировки, чтобы было понятно ЧТО и КАК проверено (Logic v2.6 Extended)",
  "rules": {
    "BIN001": {
      "level": "ERROR",
      "system": {
        "message": "БИН поставщика отсутствует или некорректен",
        "details": "supplier_BIN missing or invalid",
        "suggestion": "Проверить заполнение БИН поставщика (12 цифр)"
      },
      "user": {
        "title": "Ошибка: не найден БИН поставщика",
        "description": "В документе отсутствует или неверно указан БИН поставщика.",
        "recommendation": "Введите корректный 12-значный БИН в поле «Поставщик».",
        "ok": "БИН поставщика указан и валиден (12 цифр).",
        "success_text": "БИН поставщика указан и валиден (12 цифр)."
      }
    },
    "BIN002": {
      "level": "ERROR",
      "system": {
        "message": "БИН покупателя отсутствует или некорректен",
        "details": "recipient_BIN missing or invalid",
        "suggestion": "Проверить заполнение БИН покупателя (12 цифр)"
      },
      "user": {
        "title": "Ошибка: не найден БИН покупателя",
        "description": "В документе отсутствует или неверно указан БИН покупателя.",
        "recommendation": "Убедитесь, что БИН покупателя состоит из 12 цифр без пробелов и букв.",
        "ok": "БИН покупателя указан и валиден (12 цифр).",
        "success_text": "БИН покупателя указан и валиден (12 цифр)."
      }
    },
    "D000": {
      "level": "ERROR",
      "system": {
        "message": "Дата документа отсутствует или нераспознана",
        "details": "date_issue missing or invalid",
        "suggestion": "Проверить наличие и формат даты (ГГГГ-ММ-ДД)"
      },
      "user": {
        "title": "Ошибка: не указана дата выставления",
        "description": "Дата выписки счёта-фактуры отсутствует или указана в неверном формате.",
        "recommendation": "Введите корректную дату в формате ГГГГ-ММ-ДД.",
        "ok": "Дата выставления указана и корректно распознана.",
        "success_text": "Дата выставления указана и корректно распознана."
      }
    },
    "D001": {
      "level": "WARN",
      "system": {
        "message": "Дата выписки указана в будущем",
        "details": "issue_date > today",
        "suggestion": "Сверить дату выписки с текущей датой"
      },
      "user": {
        "title": "Предупреждение: дата выписки в будущем",
        "description": "Дата документа позже текущей даты.",
        "recommendation": "Проверьте, возможно документ ещё не должен быть выписан.",
        "ok": "Дата выписки не позже текущей даты.",
        "success_text": "Дата выписки не позже текущей даты."
      }
    },
    "TOT001": {
      "level": "ERROR",
      "system": {
        "message": "Сумма строк не равна итогу документа",
        "details": "total_calc != total_field",
        "suggestion": "Проверить расчёт итога по строкам"
      },
      "user": {
        "title": "Ошибка: суммы не совпадают",
        "description": "Сумма по строкам документа не совпадает с итоговой суммой.",
        "recommendation": "Перепроверьте все позиции и убедитесь, что итог соответствует строкам.",
        "ok": "Итог документа совпадает с суммой по всем строкам.",
        "success_text": "Итог документа совпадает с суммой по всем строкам."
      }
    },
    "VAT001": {
      "level": "ERROR",
      "system": {
        "message": "НДС не соответствует ставке",
        "details": "vat_amount != amount × rate / 100",
        "suggestion": "Проверить формулу расчёта НДС по каждой строке"
      },
      "user": {
        "title": "Ошибка: НДС посчитан неверно",
        "description": "Сумма НДС в одной из строк не соответствует ставке.",
        "recommendation": "Проверьте ставку и сумму НДС для каждой позиции.",
        "ok": "НДС по проверенным строкам соответствует заявленной ставке.",
        "success_text": "НДС по проверенным строкам соответствует заявленной ставке."
      }
    },
    "ID001": {
      "level": "ERROR",
      "system": {
        "message": "Неверный формат номера документа",
        "details": "doc_id not match regex ^[A-Z0-9_\\-]+$",
        "suggestion": "Использовать только латинские буквы, цифры, дефис и подчёркивание"
      },
      "user": {
        "title": "Ошибка: неверный формат номера",
        "description": "Номер документа содержит недопустимые символы.",
        "recommendation": "Используйте латинские буквы, цифры, дефис или подчёркивание.",
        "ok": "Номер документа соответствует формату ^[A-Z0-9_-]+$.",
        "success_text": "Номер документа соответствует формату ^[A-Z0-9_-]+$."
      }
    },
    "ID002": {
      "level": "ERROR",
      "system": {
        "message": "Номер документа отсутствует",
        "details": "doc_id missing or empty",
        "suggestion": "Заполнить поле номера документа"
      },
      "user": {
        "title": "Ошибка: отсутствует номер документа",
        "description": "Документ не содержит поля «Номер документа».",
        "recommendation": "Введите номер документа перед загрузкой.",
        "ok": "Номер документа заполнен (поле не пустое).",
        "success_text": "Номер документа заполнен (поле не пустое)."
      }
    },
    "AMT001": {
      "level": "ERROR",
      "system": {
        "message": "Сумма документа меньше или равна нулю",
        "details": "total_amount <= 0",
        "suggestion": "Проверить итоговую сумму документа"
      },
      "user": {
        "title": "Ошибка: сумма документа не указана или равна нулю",
        "description": "Общая сумма документа отсутствует или равна нулю.",
        "recommendation": "Убедитесь, что поле «Всего с НДС» заполнено корректно.",
        "ok": "Итоговая сумма указана и больше 0.",
        "success_text": "Итоговая сумма указана и больше 0."
      }
    },
    "NEG001": {
      "level": "ERROR",
      "system": {
        "message": "Общая сумма документа отрицательная",
        "details": "total_amount < 0",
        "suggestion": "Проверить знаки сумм в строках и итого"
      },
      "user": {
        "title": "Ошибка: сумма документа отрицательная",
        "description": "Общая сумма документа меньше нуля.",
        "recommendation": "Проверьте корректность чисел в строках — не должны быть отрицательными.",
        "ok": "Итоговая сумма не отрицательная (≥ 0).",
        "success_text": "Итоговая сумма не отрицательная (≥ 0)."
      }
    }
  }
}
